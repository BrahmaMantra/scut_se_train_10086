# 课程设计

## 简介

### 业务流程

（请将产品的业务逻辑进行整体概述，例如通过Flume采集信令数据，传到Kafka......）
（可参考PPT架构设计进行各组件描述，以及后续课程讲解各组件后进行补充）

### 技术架构

（请介绍产品的架构）
（可参考PPT的技术组件和架构设计）

### 产品原型

略

## 功能需求

### 指定区域内画像用户数统计分析

- 功能描述 ：根据用户指定的区域和时间范围，统计该区域内符合特定画像特征（如性别、年龄区间等）的用户数量，为商圈选址、活动策划等提供数据支持，帮助商家了解目标区域的人群规模和构成情况。
- 逻辑描述
  ：当用户输入区域ID和时间后，系统先查询数据库中对应的区域人群停留数据。若为实时数据需求，Flink从基站信令数据（实时）、用户基础数据（离线）、行政区 -
  基站关系数据（离线）中获取数据，按照设定的画像规则（如性别、年龄区间等）进行统计计算；若是离线数据查询，Spark则对基站信令数据（离线）、行政区 -
  基站关系数据（离线）、用户位图索引数据）进行关联分析和聚合计算，最终得出指定区域内各画像特征的用户数量并返回结果。
- 输入 ：区域ID、开始时间、结束时间。
- 输出 ：各画像特征对应的用户数量，如男性用户数、女性用户数，10 - 20岁、20 - 40岁、40岁以上用户数等。

### 指定区域内画像用户明细分析

- 功能描述 ：针对用户指定的区域和时间范围，查询该区域内符合特定画像特征的用户明细信息，包括用户的IMSI、性别、年龄等基础属性，以便进一步深入了解目标用户群体的具体情况，为精准营销、客户画像绘制等提供详细数据支撑。
- 逻辑描述
  ：用户输入区域ID和时间后，系统查询数据库中的相关数据。对于实时数据，Flink结合基站信令数据（实时）、用户基础数据（离线）、行政区 -
  基站关系数据（离线）进行实时过滤和匹配，筛选出符合条件的用户明细；若是离线查询，Spark则对基站信令数据（离线）、行政区 -
  基站关系数据（离线）、用户位图索引数据以及用户基础数据（离线）进行关联查询，获取指定区域内特定画像用户的详细信息并返回。
- 输入 ：区域ID、开始时间、结束时间、画像特征（如性别、年龄区间等）。
- 输出 ：符合指定条件的用户明细列表，包含用户IMSI、性别、年龄等信息。

### 指定区域内用户画像分布统计分析

- 功能描述 ：在用户指定的区域内，对不同画像特征的用户分布情况进行统计分析，以直观的方式展示各特征用户在该区域内的占比和分布态势，为商家制定区域营销策略、优化店铺布局等提供决策依据，帮助其更好地把握目标市场的人群特征分布规律。
- 逻辑描述
  ：用户输入区域ID和时间后，系统查询数据库中的数据。如果是实时场景，Flink利用基站信令数据（实时）、用户基础数据（离线）、行政区 -
  基站关系数据（离线）实时计算各画像特征用户的分布情况；对于离线场景，Spark对基站信令数据（离线）、行政区 -
  基站关系数据（离线）、用户位图索引数据以及用户基础数据（离线）进行综合分析，按照设定的画像维度（如性别、年龄等）进行分组统计和计算占比，最后将用户画像分布结果以图表或数据表格的形式呈现出来。
- 输入 ：区域ID、开始时间、结束时间。
- 输出 ：各画像特征在指定区域内的用户分布情况，，例如男性用户占比、女性用户占比，10 - 20岁、20 - 40岁、40岁以上用户占比等。

### 区域性别人群及流入流出人群离线分析

> 开发API，基于ck已有数据，增加流入、流出分析功能、流入流出的画像分布功能

#### 功能描述

根据指定区域和时间段，统计该区域在不同时段的人群流入、流出情况，并对流入、流出人群的性别、年龄等画像特征进行离线分析。该功能可帮助用户了解区域人群的动态变化和画像结构，为商圈选址、活动策划、精准营销等提供决策支持。

#### 逻辑描述

- 用户输入区域ID和时间范围后，系统从数据库中提取区域人群停留数据。
- 对流入、流出用户分别进行画像特征（如性别、年龄段等）统计，形成流入、流出人群的画像分布。

#### 输入

- 区域ID（region_id）
- 开始时间（start_time）
- 结束时间（end_time）

#### 输出

- 流入用户、流出用户的统计及画像分布（如性别、年龄段等统计）
